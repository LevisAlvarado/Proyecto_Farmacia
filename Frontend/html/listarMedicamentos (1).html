<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FARMACIA IS</title>
    <link rel="stylesheet" href="../css/listar-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" href="../imag/logos/pharmacy.ico"> 
</head>
<body>
    <div class="content">
        <h1>Listado de Medicamentos</h1>

        <form class="search-form">
            <label for="idProducto">Buscar por ID de Producto:</label>
            <input type="text" id="idProducto" name="idProducto" required>
            <button type="submit">Buscar</button>
        </form>

        <table class="clientes-table">
            <thead>
                <tr>
                    <th>ID_Medicamento</th>
                    <th>Nombre_Medicamento</th>
                    <th>Número_Lote</th>
                    <th>ID_Producto</th>
                    <th>ID_Tipo_Medicamento</th>
                    <th>Precio</th>
                    <th>Existencias</th>
                    <th>Fecha_Vencimiento</th>
                    <th>Fecha_Elaboración</th>
                    <th>Imagen</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>4</td>
                    <td>Suplemento de Omega-3</td>
                    <td>Kirkland Omega-3 Aceite de pescado 1000 mg 300 cápsulas</td>
                    <td>2023-08-10</td>
                    <td>2023-03-08</td>
                    <td>Consultar con su Medico</td>
                    <td>500</td>
                    <td>3</td>
                    <td><img src="../imag/Vitaminas/Kirkland Omega-3 Aceite de pescado 1000 mg 300 cápsulas.jpg" width="100px"></td>

                <td class="acciones">
                    <button class="editar-button" onclick="editarMedicamento(this)">M</button>
            </td>
            <td class="acciones">
                <button class="eliminar-button" onclick="eliminarMedicamento(this)">X</button>

                <tr>
                    <td><input type="text" id=" " placeholder=" " readonly></td>
                    <td><input type="text" id="nombreMedicamento" placeholder="Nombre"></td>
                    <td><input type="text" id="numeroLote" placeholder="Lote"></td>
                    <td><input type="text" id="idProducto" placeholder="ID Producto"></td>
                    <td><input type="text" id="idTipoMedicamento" placeholder="ID Tipo Medicamento"></td>
                    <td><input type="text" id="precio" placeholder="Precio"></td>
                    <td><input type="text" id="existencias" placeholder="Existencias"></td>
                    <td><input type="text" id="fechaVencimiento" placeholder="Fecha Vencimiento"></td>
                    <td><input type="text" id="fechaElaboracion" placeholder="Fecha Elaboración"></td>
                    <td><input type="text" id="imagen" placeholder="Imagen"></td>
                    <td><button id="agregarMedicamento" onclick="agregarMedicamento()">Agregar</button></td>
                    
                
            </td>
                </tr>
            </tbody>

            <tfoot>
                
            </td>
                </tr>
            </tfoot>
        </table>

        <div class="back-button">
            <a href="../html/admiMenu.html"><i class="fas fa-chevron-left"></i> Volver</a>
        </div>
    </div>
    <script>
        function agregarMedicamento() {
            var tableBody = document.querySelector(".clientes-table tbody");
            var newRow = document.createElement("tr");
            
            // Crea las celdas con los valores ingresados en los inputs
            var cells = ["idempleado","nombreMedicamento",
            "numeroLote", "idProducto",
            "idTipoMedicamento", "precio",
            "existencias", "fechaVencimiento",
            "fechaElaboracion", "imagen"];
            cells.forEach(function(cellId) {
                var cellValue = document.getElementById(cellId).value;
                var cell = document.createElement("td");
                cell.textContent = cellValue;
                newRow.appendChild(cell);
            });}
    /**********************************************************************************/
        function eliminarMedicamento(button) {
            var row = button.parentNode.parentNode;
            row.parentNode.removeChild(row);
        }

        var tabla = document.querySelector('.clientes-table tbody');
        var botonEliminar = document.querySelector('.eliminar-button');
    
        if (tabla.children.length === 0) {
            botonEliminar.style.display = 'none';
        }
/**********************************************************************************/
function editarMedicamento(button) {
    var row = button.parentNode.parentNode;
    var cells = row.querySelectorAll('td');
    
    // Mostrar formulario de edición
  // ... (otras funciones y código JavaScript) ...

function editarMedicamento(button) {
    var row = button.parentNode.parentNode;
    var cells = row.querySelectorAll('td');
    
    //// Mostrar formulario de edición
    var form = document.createElement('form');
    var editedData = {
        ID_Medicamento: cells[0].textContent,
        Nombre_Medicamento: cells[1].textContent,
        Número_Lote: cells[2].textContent,
        ID_Producto: cells[3].textContent,
        ID_Tipo_Medicamento: cells[4].textContent,
        Precio: cells[5].textContent,
        Existencias: cells[6].textContent,
        Fecha_Vencimiento: cells[7].textContent,
        Fecha_Elaboración: cells[8].textContent,
        Imagen: cells[9].textContent,
    }; 
    //// Objeto para almacenar los datos editados
    
    cells.forEach(function(cell, index) {
        var input = document.createElement('input');
        input.value = cell.textContent;
        input.name = `edited-${index}`;  //// Agrega unombre único para cada input
        form.appendChild(input);
    });
    
    var saveButton = document.createElement('button');
    saveButton.textContent = 'Guardar';
    form.appendChild(saveButton);
    
    row.parentNode.replaceChild(form, row); // Reemplazar la fila por el formulario
    
    saveButton.addEventListener('click', function() {
        var updatedCells = form.querySelectorAll('input');
        updatedCells.forEach(function(updatedCell, index) {
            cells[index].textContent = updatedCell.value;
            editedData[`edited-${index}`] = updatedCell.value; // Actualiza los datos en el objeto
        });
        document.getElementById('td').innerHTML='json.id_Medicamento'
        // Devuelve el objeto JSON con los datos editados
        //console.log(JSON.stringify(editedData)); // Mostrar el objeto en la consola
    
        // Devuelve el objeto JSON con los datos editados
        //console.log(JSON.stringify(editedData)); // Mostrar el objeto en la consola
    });
    row.appendChild(form);
}


}


            var tableBody = document.querySelector(".clientes-table tbody");

            if (tableBody.children.length === 0) {
                var accionesHeader = document.querySelector(".clientes-table th.acciones");
                accionesHeader.style.display = "none";
            }
    </script>
</body>
<style>
    .acciones {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .editar-button,
        .eliminar-button {
            margin: 2px;
        }
</style>
</html>
